# SlideBox - PHP file

The metadata associated with each of the virtual slides that are displayed by the Multifocal-plane Virtual Microscope are stored in a SQL database.&nbsp; The Virtual SlideBox uses the PHP file ([jrSB_GetSldLst.php](https://github.com/MFPvirtual-microscope/SlideBox/blob/main/SldBox-PHP/jrSB_GetSldLst.php)) found in this GitHub directory ([SldBox-PHP](https://github.com/MFPvirtual-microscope/SlideBox/tree/main/SldBox-PHP)) to query the SQL database for information about virtual slides that match the criteria specified by the user.&nbsp; The search criteria are passed to this PHP file as a JSON stringified array via an Ajax POST request from the javascript function selGetSldList(), which is found in [jrsbRegAjax.js](https://github.com/MFPvirtual-microscope/SlideBox/blob/main/SldBox-HTMLclient/jrsbRegAjax.js).&nbsp; In response to the Ajax POST request, the PHP file returns the results of the SQL search as a JSON stringified array via a callback to the javascript function selMakeItmArr(), which is found in [jrsbSelectAction.js](https://github.com/MFPvirtual-microscope/SlideBox/blob/main/SldBox-HTMLclient/jrsbSelectAction.js).

The criteria for limiting the slide list by \"Organ System\", \"Source\", \"Stain\", \"Focal plane\", and \"Slide number\" are encoded numerically (in the SQL database).&nbsp; For these criteria, the data passed to the PHP file ([jrSB_GetSldLst.php](https://github.com/MFPvirtual-microscope/SlideBox/blob/main/SldBox-PHP/jrSB_GetSldLst.php)) consist of pairs of integers which the PHP function jrMkNumSrchStrg() converts into a SQL clause of the form: "WHERE _SQL-variable_ BETWEEN _start-integer_ AND _end-integer_".

For limiting the slide list by \"Species\" and \"Slide name\", the PHP file is passed a text-string which is used in a SQL prepared statement to search for virtual slides that match the SQL clause: "WHERE _SQL-variable_ LIKE _text-string_".&nbsp; The text-string can contain mySQL wildcards, so the option in SlideBox of limiting the search to virtual slides whose Slide Name or Species "includes \'_text_\'(specified by user)" becomes the SQL clause: WHERE _SQL-variable_ LIKE %_text-string_%".

On the server, the PHP file ([jrSB_GetSldLst.php](https://github.com/MFPvirtual-microscope/SlideBox/blob/main/SldBox-PHP/jrSB_GetSldLst.php)) listed here should be included in the same directory are the HTML, javascript, and CSS files listed in the GitHub directory [SldBox-HTMLclient](https://github.com/MFPvirtual-microscope/SlideBox/tree/main/SldBox-HTMLclient).
